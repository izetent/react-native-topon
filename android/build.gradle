buildscript {
  ext.getExtOrDefault = {name ->
    return rootProject.ext.has(name) ? rootProject.ext.get(name) : project.properties['Topon_' + name]
  }

  repositories {
    google()
    mavenCentral()
    maven { url "https://jfrog.anythinktech.com/artifactory/overseas_sdk" }
    maven { url "https://dl-maven-android.mintegral.com/repository/mbridge_android_sdk_oversea" }
  }

  dependencies {
    classpath "com.android.tools.build:gradle:8.7.2"
    // noinspection DifferentKotlinGradleVersion
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:${getExtOrDefault('kotlinVersion')}"
  }
}


apply plugin: "com.android.library"
apply plugin: "kotlin-android"

apply plugin: "com.facebook.react"

def getExtOrIntegerDefault(name) {
  return rootProject.ext.has(name) ? rootProject.ext.get(name) : (project.properties["Topon_" + name]).toInteger()
}

android {
  namespace "com.topon"

  compileSdkVersion getExtOrIntegerDefault("compileSdkVersion")

  defaultConfig {
    minSdkVersion getExtOrIntegerDefault("minSdkVersion")
    targetSdkVersion getExtOrIntegerDefault("targetSdkVersion")
  }

  buildFeatures {
    buildConfig true
  }

  buildTypes {
    release {
      minifyEnabled false
    }
  }

  lintOptions {
    disable "GradleCompatible"
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
  }

  sourceSets {
    main {
      java.srcDirs += [
        "generated/java",
        "generated/jni"
      ]
    }
  }
}

repositories {
  mavenCentral()
  google()
  flatDir { dirs "$projectDir/libs" }
  maven { url "https://jfrog.anythinktech.com/artifactory/overseas_sdk" }
  maven { url "https://dl-maven-android.mintegral.com/repository/mbridge_android_sdk_oversea" }
}

def kotlin_version = getExtOrDefault("kotlinVersion")

dependencies {
  implementation "com.facebook.react:react-android"
  implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
  //Anythink (Necessary)
  implementation "com.anythink.sdk:core-tpn:6.5.10"
  implementation "com.anythink.sdk:nativead-tpn:6.5.10"
  implementation "com.anythink.sdk:banner-tpn:6.5.10"
  implementation "com.anythink.sdk:interstitial-tpn:6.5.10"
  implementation "com.anythink.sdk:rewardedvideo-tpn:6.5.10"
  implementation "com.anythink.sdk:splash-tpn:6.5.10"

  //Androidx (Necessary)
  implementation "androidx.appcompat:appcompat:1.6.1"
  implementation "androidx.browser:browser:1.4.0"

  //UnityAds
  implementation "com.anythink.sdk:adapter-tpn-unityads:6.5.10"
  implementation "com.unity3d.ads:unity-ads:4.14.0"

  //Amazon
  implementation "com.anythink.sdk:adapter-tpn-amazon:6.5.10"
  implementation "com.amazon.android:aps-sdk:11.0.1"
  implementation "com.iabtcf:iabtcf-decoder:2.0.10"

  //Facebook
  implementation "com.anythink.sdk:adapter-tpn-facebook:6.5.10"
  implementation "com.facebook.android:audience-network-sdk:6.20.0"
  implementation "androidx.annotation:annotation:1.0.0"

  //Admob
  implementation "com.anythink.sdk:adapter-tpn-admob:6.5.10"
  implementation "com.google.android.gms:play-services-ads:24.4.0"

  //AppLovin
  implementation "com.anythink.sdk:adapter-tpn-applovin:6.5.10"
  implementation "com.applovin:applovin-sdk:13.3.1"

  //Mintegral
  implementation "com.anythink.sdk:adapter-tpn-mintegral:6.5.10"
  implementation "com.mbridge.msdk.oversea:mbridge_android_sdk:16.9.71"
  implementation "androidx.recyclerview:recyclerview:1.1.0"

  //Tramini
  implementation "com.anythink.sdk:tramini-plugin-tpn:6.5.10"
}
